---
layout: book
title: 代码的坏味道
book: refactor
---

## 1.  Duplicated Code（重复代码）

在一个以上的地方看到相同的程序结构。
* 复用性差
* 代码膨胀混乱，难以维护

场景：
* case1：同一个类的两个函数含有相同的表达式。
* case2：两个互为兄弟的子类中含有相同的表达式。
* case3：两个毫不相关的类中含有相同的表达式。

解决：提取公共函数。


## 2.  Long Method（过长函数）

函数的实现太长，有的甚至一屏幕都看不完。
* 程序愈长就愈难理解
* 函数过长阅读起来也不方便
* 小函数的价值：解释能力、共享能力、选择能力

原则：每当感觉需要以注释来说明代码用途和实现手法之间的语义距离时，可以将这段代码替换成一个独立的函数。条件表达式和循环常常也是提炼的信号。


## 3.  Large Class（过大的类）

想利用单一类做太多事情。
* 类内往往会出现太多实例变量。
* 一个类如果拥有太多的代码，也是代码重复、混乱、死亡的绝佳滋生地点。

解决：将相关的几个变量提取到一个新的类。做太多事情的类，可以考虑把责任委托给其他类。
